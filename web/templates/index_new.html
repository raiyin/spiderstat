<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="../static/css/normalize.css">
        <link rel="stylesheet" type="text/css" href="../static/css/theme.css"/>
        <script src="../static/js/loader.js"></script>
        <script>
            google.charts.load('current', {packages: ['corechart', 'line']});
            google.charts.setOnLoadCallback(drawLineColors);

            function drawLineColors(report_name)
            {
                var data = new google.visualization.DataTable();
                var options = {}

                if(report_name=='London')
                {
                    data.addColumn('number', 'X');
                    data.addColumn('number', 'Dogs');
                    data.addColumn('number', 'Cats');
                    data.addRows([
                        [0, 0, 0],    [1, 10, 5],   [2, 23, 15],  [3, 17, 9],   [4, 18, 10],  [5, 9, 5],
                        [6, 11, 3],   [7, 27, 19],  [8, 33, 25],  [9, 40, 32],  [10, 32, 24], [11, 35, 27],
                        [12, 30, 22], [13, 40, 32], [14, 42, 34], [15, 47, 39], [16, 44, 36], [17, 48, 40],
                        [18, 52, 44], [19, 54, 46], [20, 42, 34], [21, 55, 47], [22, 56, 48], [23, 57, 49],
                        [24, 60, 52], [25, 50, 42], [26, 52, 44], [27, 51, 43], [28, 49, 41], [29, 53, 45],
                        [30, 55, 47], [31, 60, 52], [32, 61, 53], [33, 59, 51], [34, 62, 54], [35, 65, 57],
                        [36, 62, 54], [37, 58, 50], [38, 55, 47], [39, 61, 53], [40, 64, 56], [41, 65, 57],
                        [42, 63, 55], [43, 66, 58], [44, 67, 59], [45, 69, 61], [46, 69, 61], [47, 70, 62],
                        [48, 72, 64], [49, 68, 60], [50, 66, 58], [51, 65, 57], [52, 67, 59], [53, 70, 62],
                        [54, 71, 63], [55, 72, 64], [56, 73, 65], [57, 75, 67], [58, 70, 62], [59, 68, 60],
                        [60, 64, 56], [61, 60, 52], [62, 65, 57], [63, 67, 59], [64, 68, 60], [65, 69, 61],
                        [66, 70, 62], [67, 72, 64], [68, 75, 67], [69, 80, 72]]);

                    options =
                    {
                        hAxis:
                        {
                            title: 'Time'
                        },
                        vAxis:
                        {
                            title: 'Popularity'
                        },
                        colors: ['#a52714', '#097138'],
                        backgroundColor: '#333'
                    };
                }
                if(report_name=='Paris')
                {
                    data.addColumn('number', 'X');
                    data.addColumn('number', 'Dogs');
                    data.addColumn('number', 'Cats');
                    data.addRows([
                        [0, 0, 0],    [1, 10, 5],   [2, 23, 15],  [3, 17, 9],   [4, 18, 10],  [5, 9, 5],
                        [6, 11, 3],   [7, 27, 19],  [8, 33, 25],  [9, 40, 32],  [10, 32, 24], [11, 35, 27],
                        [12, 30, 22], [13, 40, 32], [14, 42, 34], [15, 47, 39], [16, 44, 36], [17, 48, 40],
                        [18, 52, 44], [19, 54, 46], [20, 42, 34], [21, 55, 47], [22, 56, 48], [23, 57, 49],
                        [24, 60, 52], [25, 50, 42], [26, 52, 44], [27, 78, 43], [28, 11, 41], [29, 53, 45],
                        [30, 55, 47], [31, 45, 52], [32, 61, 53], [33, 59, 51], [34, 23, 54], [35, 65, 57],
                        [36, 62, 54], [37, 58, 50], [38, 55, 47], [39, 61, 53], [40, 64, 56], [41, 65, 57],
                        [42, 63, 55], [43, 66, 58], [44, 67, 59], [45, 45, 61], [46, 69, 61], [47, 70, 62],
                        [48, 72, 64], [49, 65, 60], [50, 12, 58], [51, 65, 57], [52, 67, 59], [53, 70, 62],
                        [54, 71, 63], [55, 72, 64], [56, 73, 65], [57, 75, 67], [58, 70, 62], [59, 68, 60],
                        [60, 64, 56], [61, 60, 52], [62, 65, 57], [63, 67, 59], [64, 68, 60], [65, 69, 61],
                        [66, 70, 62], [67, 72, 64], [68, 75, 67], [69, 80, 72]]);

                    options =
                    {
                        hAxis:
                        {
                            title: 'Time'
                        },
                        vAxis:
                        {
                            title: 'Popularity'
                        },
                        colors: ['#a52714', '#097138'],
                        backgroundColor: '#333'
                    };
                }
                if(report_name=='Tokyo')
                {
                    data.addColumn('number', 'X');
                    data.addColumn('number', 'Dogs');
                    data.addColumn('number', 'Cats');
                    data.addRows([
                        [0, 0, 0],    [1, 10, 5],   [2, 23, 15],  [3, 17, 9],   [4, 18, 10],  [5, 9, 5],
                        [6, 11, 3],   [7, 27, 19],  [8, 33, 25],  [9, 40, 32],  [10,  35, 27], [11,32, 24],
                        [12, 40, 32], [13, 30, 22], [14, 47, 39], [15, 42, 34], [16,  48, 40], [17,44, 36],
                        [18, 54, 46], [19, 52, 44], [20, 55, 47], [21, 42, 34], [22,  57, 49], [23,56, 48],
                        [24, 50, 42], [25, 60, 52], [26, 51, 43], [27, 52, 44], [28,  53, 45], [29,49, 41],
                        [30, 60, 52], [31, 55, 47], [32, 59, 51], [33, 61, 53], [34,  65, 57], [35,62, 54],
                        [36, 58, 50], [37, 62, 54], [38, 61, 53], [39, 55, 47], [40,  65, 57], [41,64, 56],
                        [42, 66, 58], [43, 63, 55], [44, 69, 61], [45, 67, 59], [46,  70, 62], [47,69, 61],
                        [48, 68, 60], [49, 72, 64], [50, 65, 57], [51, 66, 58], [52,  70, 62], [53,67, 59],
                        [54, 72, 64], [55, 71, 63], [56, 75, 67], [57, 73, 65], [58,  68, 60], [59,70, 62],
                        [60, 60, 52], [61, 64, 56], [62, 67, 59], [63, 65, 57], [64,  69, 61], [65,68, 60],
                        [66, 72, 64], [67, 70, 62], [68, 80, 72], [69, 75, 67]]);

                    options =
                    {
                        hAxis:
                        {
                            title: 'Time'
                        },
                        vAxis:
                        {
                            title: 'Popularity'
                        },
                        colors: ['#a52714', '#097138'],
                        backgroundColor: '#333'
                    };
                }

                {% for report in reports %}
                if(report_name=='{{report.name}}')
                {
                    {% for column, typename in report.columns.items() %}
                    data.addColumn('{{typename}}', '{{column}}');
                    {% endfor %}


                    data.addRows([{{report.data}}]);

                    options =
                    {
                        hAxis:
                        {
                            title: '{{report.x_title}}'
                        },
                        vAxis:
                        {
                            title: '{{report.y_title}}'
                        },
                        colors: ['#a52714', '#097138'],
                        backgroundColor: '#333'
                    };
                }
                {% endfor %}

                var chart = new google.visualization.LineChart(document.getElementById(report_name));
                chart.draw(data, options);
            }

            function open_report(evt, report_name)
            {
                var i, tabcontent, tablinks;

                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++)
                {
                    tabcontent[i].style.display = "none";
                }

                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++)
                {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }

                document.getElementById(report_name).style.display = "block";
                evt.currentTarget.className += " active";

                drawLineColors(report_name)
            }

        </script>
        <title>SpiderStat.ru</title>
    </head>

    <body>
        <div class="main container-fluid h-100">
            <div class="row text-center h-100">

                <div class="col-2 bg-dark">
                    <div class="tab">
                        <button class="tablinks" onclick="open_report(event, 'London')">London</button>
                        <button class="tablinks" onclick="open_report(event, 'Paris')">Paris</button>
                        <button class="tablinks" onclick="open_report(event, 'Tokyo')">Tokyo</button>
                        {% for report in reports %}
                        <button class="tablinks" onclick="open_report(event, '{{report.name}}')">{{ report.name }}</button>
                        {% endfor %}
                    </div>
                </div>

                <div class="col-1 bg-dark">
                </div>

                <div class="col-8 bg-dark">
                    <div id="London" class="tabcontent">
                        <h3>London</h3>
                    </div>

                    <div id="Paris" class="tabcontent">
                        <h3>Paris</h3>
                    </div>

                    <div id="Tokyo" class="tabcontent">
                        <h3>Tokyo</h3>
                    </div>

                    {% for report in reports %}
                    <div id="{{report.name}}" class="tabcontent">
                        <h3>{{report.name}}</h3>
                    </div>
                    {% endfor %}

                </div>

                <div class="col-1 bg-dark">
                </div>

            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    </body>
</html>
